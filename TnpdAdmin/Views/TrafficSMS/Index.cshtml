
@using MvcPaging
@using Tnpd.Helpers
@using TnpdModels
@model MvcPaging.IPagedList<TnpdModels.TrafficSMSCarInfo>

@{
    ViewBag.Title = "交通違規簡訊審核列表";
}

<h2>交通違規簡訊審核列表</h2>

@*<p>
    @Html.ActionLink("新增", "Create")
</p>*@

    @using (Html.BeginForm())
{
<div>
                 車子類型: @Html.DropDownList("SearchByCarType", new SelectList(Enum.GetValues(typeof(TnpdModels.CarType))),"請選擇")
                     @Html.DisplayNameFor(model => model.FirstOrDefault().CarAllow): @Html.DropDownList("SearchByCarAllow", new SelectList(Enum.GetValues(typeof(TnpdModels.CarAllow))),"請選擇")
                     @Html.DisplayNameFor(model => model.FirstOrDefault().checkStatus): @Html.DropDownList("SearchBycheckStatus", new SelectList(Enum.GetValues(typeof(TnpdModels.SMSStatus))),"請選擇")
                 <br/> 關鍵字:@Html.InputSearchBox("SearchBySubject", ViewData["SearchBySubject"]) (車號、車主/公司名稱、身分證字號)
                 <br/>發布日期:<input type="text" name="SearchByStartDate" value="@ViewData["SearchByStartDate"]" class = "datepicker"/> ~ <input type="text" name="SearchByEndDate" value="@ViewData["SearchByEndDate"]" class = "datepicker"/>
    </div>
 <div>
        <input type="submit" value="搜尋" />
    </div>

    
}

<table class="table table-v">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.FirstOrDefault().CarNO)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.FirstOrDefault().CarType)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.FirstOrDefault().CarOwner)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.FirstOrDefault().Pid)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.FirstOrDefault().CarAllow)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.FirstOrDefault().checkStatus)
        </th>
        
        <th>
           註冊人姓名
        </th>
        <th>
            @Html.DisplayNameFor(model => model.FirstOrDefault().InitDate)
        </th>
        <th></th>
    </tr>
<tbody>
@foreach (var item in Model) {
    <tr>
        <td style="text-align: center">
            @Html.DisplayFor(modelItem => item.CarNO)
        </td>
        <td style="text-align: center">
            @Html.DisplayFor(modelItem => item.CarType)
        </td>
        <td style="text-align: center">
            @Html.DisplayFor(modelItem => item.CarOwner)
        </td>
        <td style="text-align: center">
            @Html.DisplayFor(modelItem => item.Pid)
        </td>
        <td style="text-align: center">
            @Html.DisplayFor(modelItem => item.CarAllow)
        </td>
        <td style="text-align: center">
            @Html.DisplayFor(modelItem => item.checkStatus)
           @if (item.checkStatus== SMSStatus.未通過 && item.TrafficSMSCarInfoRejectId.HasValue)
           {
               <span>(@item.TrafficSmsCarInfoReject.Subject)</span>
           }
        </td>
        <td style="text-align: center">
            @Html.DisplayFor(modelItem => item.trafficSms.Name)
        </td>
        <td style="text-align: center">
            @Html.DisplayFor(modelItem => item.trafficSms.InitDate)
        </td>
        <td>
            @Html.ActionLink("審核", "Edit", new { id=item.Id }) 
            @*@Html.ActionLink("內容", "Details", new { id=item.Id }) | *@
            @*@Html.ActionLink("刪除", "Delete", new { id=item.Id })*@
            @Html.Hidden("ID",item.Id)
        </td>
    </tr>
}
</tbody>
</table>

<div class="pager">
    @Html.Pager(Model.PageSize, Model.PageNumber, Model.TotalItemCount) 共  @ViewBag.Total 筆
</div>
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")

    @Scripts.Render("~/bundles/jqueryui")
    @Styles.Render("~/Content/themes/base/css")
    <script>
        $(document).ready(function() {
            $(".datepicker").datepicker();

        });
    </script>
}

